<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Phoenix TechWorks Group - Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯ Ø§Ø¯Ù…ÛŒÙ†</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Vazirmatn:wght@300;400;500;600;700&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --panel-bg: rgba(15, 15, 15, 0.9);
            --select-tint: rgba(255, 255, 255, 0.05);
            --select-open-bg: rgba(255, 255, 255, 0.12);
        }
        
        /* CSS Updated - Modal Theme Unified v3.1 - Animation Reset - 2025-09-19-17:22 */
        body {
            font-family: 'Vazirmatn', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: #0a0a0a;
            background-image: 
                radial-gradient(circle at 20% 80%, rgba(120, 119, 198, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(255, 119, 198, 0.15) 0%, transparent 50%),
                radial-gradient(circle at 40% 40%, rgba(120, 219, 255, 0.1) 0%, transparent 50%);
            min-height: 100vh;
            color: #ffffff;
            direction: rtl;
        }
        
        .header {
            background: rgba(15, 15, 15, 0.9);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            padding: 1rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 100;
        }
        
        .logo-section {
            display: flex;
            align-items: center;
            gap: 1rem;
        }
        
        .logo-icon {
            width: 48px;
            height: 48px;
            background: linear-gradient(135deg, #7877c6 0%, #ff77c6 100%);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
        }
        
        .logo-text h1 {
            font-size: 1.25rem;
            font-weight: 700;
            margin-bottom: 0.25rem;
        }
        
        .logo-text p {
            font-size: 0.75rem;
            color: rgba(255, 255, 255, 0.6);
        }
        
        .user-info {
            display: flex;
            align-items: center;
            gap: 1rem;
        }
        
        .user-avatar {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, #7877c6 0%, #ff77c6 100%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
        }
        
        .logout-btn {
            background: rgba(239, 68, 68, 0.1);
            color: #f87171;
            border: 1px solid rgba(239, 68, 68, 0.2);
            padding: 0.5rem 1rem;
            border-radius: 8px;
            cursor: pointer;
            font-family: inherit;
            transition: all 0.3s ease;
        }
        
        .logout-btn:hover {
            background: rgba(239, 68, 68, 0.2);
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 2rem;
        }
        
        .dashboard-title {
            text-align: center;
            margin-bottom: 3rem;
        }
        
        .dashboard-title h2 {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
            background: linear-gradient(135deg, #7877c6 0%, #ff77c6 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .dashboard-title p {
            color: rgba(255, 255, 255, 0.7);
        }
        
        .admin-panel {
            background: rgba(15, 15, 15, 0.9);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 16px;
            overflow: hidden;
        }
        
        .panel-header {
            background: linear-gradient(135deg, rgba(120, 119, 198, 0.1) 0%, rgba(255, 119, 198, 0.05) 100%);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            padding: 1.5rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .panel-title {
            font-size: 1.5rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }
        
        .add-user-btn {
            background: linear-gradient(135deg, #7877c6 0%, #ff77c6 100%);
            color: white;
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: 8px;
            cursor: pointer;
            font-family: inherit;
            font-weight: 600;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .add-user-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(120, 119, 198, 0.3);
        }
        
        .users-table {
            width: 100%;
            border-collapse: collapse;
        }
        
        .users-table th,
        .users-table td {
            padding: 1rem;
            text-align: right;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .users-table th {
            background: rgba(120, 119, 198, 0.1);
            font-weight: 600;
            color: #7877c6;
        }
        
        .users-table tbody tr:hover {
            background: rgba(255, 255, 255, 0.05);
        }
        
        .action-btn {
            padding: 0.5rem 1rem;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-family: inherit;
            font-size: 0.875rem;
            margin: 0 0.25rem;
            transition: all 0.3s ease;
        }
        
        .edit-btn {
            background: rgba(34, 197, 94, 0.1);
            color: #4ade80;
            border: 1px solid rgba(34, 197, 94, 0.2);
        }
        
        .edit-btn:hover {
            background: rgba(34, 197, 94, 0.2);
        }
        
        .reset-btn {
            background: rgba(251, 191, 36, 0.1);
            color: #fbbf24;
            border: 1px solid rgba(251, 191, 36, 0.2);
        }
        
        .reset-btn:hover {
            background: rgba(251, 191, 36, 0.2);
        }
        
        .delete-btn {
            background: rgba(239, 68, 68, 0.1);
            color: #f87171;
            border: 1px solid rgba(239, 68, 68, 0.2);
        }
        
        .delete-btn:hover {
            background: rgba(239, 68, 68, 0.2);
        }
        
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            
            /* START: ØªØºÛŒÛŒØ±Ø§Øª Ø§Ø¹Ù…Ø§Ù„ Ø´Ø¯Ù‡ */
            background: #0a0a0a;
            background-image: 
                radial-gradient(circle at 20% 80%, rgba(120, 119, 198, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(255, 119, 198, 0.15) 0%, transparent 50%),
                radial-gradient(circle at 40% 40%, rgba(120, 219, 255, 0.1) 0%, transparent 50%);
            /* END: ØªØºÛŒÛŒØ±Ø§Øª Ø§Ø¹Ù…Ø§Ù„ Ø´Ø¯Ù‡ */
            
            backdrop-filter: blur(10px);
            z-index: 1000;
            padding: 2rem;
            overflow-y: auto;
        }
        
        .modal-content {
            background: rgba(15, 15, 15, 0.9);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 16px;
            max-width: 800px;
            margin: 0 auto;
            position: relative;
            overflow: hidden;
            box-shadow: 
                0 25px 50px rgba(0, 0, 0, 0.5),
                0 0 0 1px rgba(255, 255, 255, 0.05),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
            animation: slideUp 0.8s cubic-bezier(0.16, 1, 0.3, 1);
        }
        
        .modal-content::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 1px;
            background: linear-gradient(90deg, transparent, rgba(120, 119, 198, 0.8), transparent);
        }
        
        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .modal-header {
            background: linear-gradient(135deg, rgba(120, 119, 198, 0.1) 0%, rgba(255, 119, 198, 0.05) 100%);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            padding: 1.5rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .modal-title {
            font-size: 1.5rem;
            font-weight: 600;
        }
        
        .close-btn {
            background: none;
            border: none;
            color: rgba(255, 255, 255, 0.7);
            font-size: 1.5rem;
            cursor: pointer;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }
        
        .close-btn:hover {
            background: rgba(255, 255, 255, 0.1);
            color: white;
        }
        
        .modal-body {
            padding: 2rem;
            background: rgba(15, 15, 15, 0.9);
            /* sync CSS var with actual bg for precise matching */
            --panel-bg: rgba(15, 15, 15, 0.9);
        }
        
        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .form-section {
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid #444;
        }

        .form-section h4 {
            color: #00d4ff;
            margin-bottom: 15px;
        }

        .photo-upload {
            text-align: center;
        }

        .photo-preview {
            width: 150px;
            height: 150px;
            border: 2px dashed #555;
            border-radius: 10px;
            margin: 0 auto 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: #2a2a2a;
            overflow: hidden;
        }

        .photo-preview img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 8px;
        }

        .no-photo {
            color: #777;
            text-align: center;
        }

        .no-photo i {
            display: block;
            margin-bottom: 10px;
        }

        .photo-controls {
            display: flex;
            gap: 10px;
            justify-content: center;
        }        .form-group {
            margin-bottom: 1.5rem;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            color: rgba(255, 255, 255, 0.9);
            font-weight: 500;
        }
        
        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 0.75rem 1rem;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            color: white;
            font-family: inherit;
            transition: all 0.3s ease;
        }
        
        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: #7877c6;
            background: rgba(255, 255, 255, 0.08);
            box-shadow: 0 0 0 3px rgba(120, 119, 198, 0.2);
        }
        
        .form-group textarea {
            resize: vertical;
            min-height: 80px;
        }
        
        .date-group {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
        }
        
        .date-input-group {
            display: flex;
            flex-direction: column;
        }
        
        .date-input-group label {
            font-size: 0.875rem;
            color: rgba(255, 255, 255, 0.7);
            margin-bottom: 0.25rem;
        }

        .form-group.full-width {
            grid-column: 1 / -1;
        }

        .form-group.full-width .date-group {
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        }
        
        .form-actions {
            display: flex;
            justify-content: flex-end;
            gap: 1rem;
            margin-top: 2rem;
            padding-top: 1.5rem;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .btn {
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-family: inherit;
            font-weight: 600;
            transition: all 0.3s ease;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #7877c6 0%, #ff77c6 100%);
            color: white;
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(120, 119, 198, 0.3);
        }
        
        .btn-secondary {
            background: rgba(255, 255, 255, 0.1);
            color: rgba(255, 255, 255, 0.8);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .btn-secondary:hover {
            background: rgba(255, 255, 255, 0.15);
            color: white;
        }
        
        .empty-state {
            text-align: center;
            padding: 4rem 2rem;
            color: rgba(255, 255, 255, 0.6);
        }
        
        .empty-state-icon {
            font-size: 4rem;
            margin-bottom: 1rem;
        }
        
        .search-box {
            margin: 1.5rem 2rem;
            position: relative;
        }
        
        .search-box input {
            width: 100%;
            padding: 0.75rem 3rem 0.75rem 1rem;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            color: white;
            font-family: inherit;
        }
        
        .search-box input:focus {
            outline: none;
            border-color: #7877c6;
            background: rgba(255, 255, 255, 0.08);
        }
        
        .search-box .search-icon {
            position: absolute;
            right: 1rem;
            top: 50%;
            transform: translateY(-50%);
            color: rgba(255, 255, 255, 0.5);
        }

        /* Persian Date Input Styling */
        .date-input-wrapper {
            position: relative;
            display: inline-block;
            width: 100%;
        }

        .date-input-wrapper input {
            width: 100%;
            padding: 0.75rem 1rem 0.75rem 2.75rem; /* ÙØ¶Ø§ÛŒ Ú©Ø§ÙÛŒ Ø¨Ø±Ø§ÛŒ Ø¢ÛŒÚ©Ù† Ø³Ù…Øª Ú†Ù¾ */
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            color: rgba(255, 255, 255, 0.7); /* Ø·ÙˆØ³ÛŒ Ù…Ø«Ù„ ÙÛŒÙ„Ø¯ Ø´Ù…Ø³ÛŒ */
            font-family: inherit;
            font-size: 0.875rem;
            direction: rtl;
            text-align: right;
        }

        /* Placeholder color to match Shamsi field */
        .date-input-wrapper input::placeholder {
            color: rgba(255, 255, 255, 0.7);
            opacity: 1;
        }

        /* Ensure date input text uses the same grey color across WebKit */
        .date-input-wrapper input[type="date"]::-webkit-datetime-edit,
        .date-input-wrapper input[type="date"]::-webkit-datetime-edit-text,
        .date-input-wrapper input[type="date"]::-webkit-datetime-edit-year-field,
        .date-input-wrapper input[type="date"]::-webkit-datetime-edit-month-field,
        .date-input-wrapper input[type="date"]::-webkit-datetime-edit-day-field {
            color: rgba(255, 255, 255, 0.7);
        }

        /* Prevent extra internal padding that can push text into the icon area */
        .date-input-wrapper input[type="date"]::-webkit-datetime-edit-fields-wrapper {
            padding: 0;
        }

        .date-input-wrapper input:focus {
            outline: none;
            border-color: #7877c6;
            background: rgba(255, 255, 255, 0.08);
        }

        /* Hide native date indicator to match custom icon */
        .date-input-wrapper input[type="date"]::-webkit-calendar-picker-indicator {
            opacity: 0;
            pointer-events: none;
        }
        .date-input-wrapper input[type="date"] {
            -webkit-appearance: none;
            appearance: none;
        }

        .calendar-icon {
            position: absolute;
            left: 1rem;
            top: 50%;
            transform: translateY(-50%);
            cursor: pointer;
            transition: all 0.3s ease;
            background: none;
            border: none;
            padding: 0;
            width: 16px;
            height: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0.6;
            z-index: 2;
        }

        .calendar-icon:hover {
            opacity: 1;
            transform: translateY(-50%) scale(1.1);
        }

        .calendar-icon svg {
            width: 16px;
            height: 16px;
            fill: currentColor;
            color: rgba(255, 255, 255, 0.6);
        }

        .calendar-icon:hover svg {
            color: #7877c6;
        }
        
        .status-badge {
            padding: 0.25rem 0.75rem;
            border-radius: 12px;
            font-size: 0.75rem;
            font-weight: 600;
        }
        
        .status-active {
            background: rgba(34, 197, 94, 0.1);
            color: #4ade80;
            border: 1px solid rgba(34, 197, 94, 0.2);
        }
        
        .status-inactive {
            background: rgba(239, 68, 68, 0.1);
            color: #f87171;
            border: 1px solid rgba(239, 68, 68, 0.2);
        }

        /* Ø§Ø³ØªØ§ÛŒÙ„ Ø¨Ø±Ø§ÛŒ Ú¯Ø²ÛŒÙ†Ù‡â€ŒÙ‡Ø§ÛŒ Ø¯Ø§Ø®Ù„ Ù…Ù†ÙˆÛŒ ØªØ¹Ø¯Ø§Ø¯ Ú©Ø§Ø± Ø±ÙˆØ²Ø§Ù†Ù‡ */
        #dailyWorkCount option {
            background: transparent; /* Ø§Ø² Ù¾Ø³â€ŒØ²Ù…ÛŒÙ†Ù‡â€ŒÛŒ Ø®ÙˆØ¯ Ú©Ø§Ø¯Ø± Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù† */
            color: white; /* Ø±Ù†Ú¯ Ù…ØªÙ† Ø³ÙÛŒØ¯ */
            padding: 8px; /* Ú©Ù…ÛŒ ÙØ§ØµÙ„Ù‡ Ø¯Ø§Ø®Ù„ÛŒ Ø¨Ø±Ø§ÛŒ Ø²ÛŒØ¨Ø§ÛŒÛŒ */
        }

        /* Ø§Ø³ØªØ§ÛŒÙ„ Ø¨Ø±Ø§ÛŒ Ù‡Ø§ÙˆØ± (Ø±ÙØªÙ† Ù…ÙˆØ³ Ø±ÙˆÛŒ Ú¯Ø²ÛŒÙ†Ù‡â€ŒÙ‡Ø§) */
        #dailyWorkCount option:hover {
            background: #7877c6; /* Ø±Ù†Ú¯ Ø¨Ù†ÙØ´ Ù…Ø´Ø§Ø¨Ù‡ ØªÙ… Ø§ØµÙ„ÛŒ */
            cursor: pointer;
        }

        /* Ø§Ø³ØªØ§ÛŒÙ„ Ø¨Ø±Ø§ÛŒ Ú¯Ø²ÛŒÙ†Ù‡â€ŒÙ‡Ø§ÛŒ Ø¯Ø§Ø®Ù„ Ù…Ù†ÙˆÛŒ Ù†ÙˆØ¹ Ú©Ø§Ø± (Ù‡Ù…â€ŒØ±Ù†Ú¯ Ø¨Ø§ ØªØ¹Ø¯Ø§Ø¯ Ú©Ø§Ø± Ø±ÙˆØ²Ø§Ù†Ù‡) */
        #jobType option {
            background: transparent; /* Ø§Ø² Ù¾Ø³â€ŒØ²Ù…ÛŒÙ†Ù‡â€ŒÛŒ Ø®ÙˆØ¯ Ú©Ø§Ø¯Ø± Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù† */
            color: white;
            padding: 8px;
        }

        #jobType option:hover {
            background: #7877c6; /* Ø±Ù†Ú¯ Ø¨Ù†ÙØ´ Ù…Ø´Ø§Ø¨Ù‡ ØªÙ… Ø§ØµÙ„ÛŒ */
            cursor: pointer;
        }

        /* ÛŒÚ©Ø³Ø§Ù†â€ŒØ³Ø§Ø²ÛŒ Ø¸Ø§Ù‡Ø± Ù…Ù†ÙˆÛŒ Ø¨Ø§Ø² Ù‡Ø± Ø¯Ùˆ select (Ù†ÙˆØ¹ Ú©Ø§Ø± Ùˆ ØªØ¹Ø¯Ø§Ø¯ Ú©Ø§Ø± Ø±ÙˆØ²Ø§Ù†Ù‡) */
        #jobType, #dailyWorkCount {
            appearance: none;
            -webkit-appearance: none;
            -moz-appearance: none;
            color: #ffffff;
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            padding: 0.75rem 1rem !important; /* ÙØ§ØµÙ„Ù‡ Ø¯Ø§Ø®Ù„ÛŒ Ù…Ø·Ù„ÙˆØ¨ */
            /* Ù¾Ø¯ÛŒÙ†Ú¯ Ù‡Ù…â€ŒØ±Ù†Ú¯ Ù¾Ø³â€ŒØ²Ù…ÛŒÙ†Ù‡ Ø®ÙˆØ¯ Ø³Ù„Ú©Øª (Ø®Ø§Ú©Ø³ØªØ±ÛŒ) */
            background: var(--select-tint);
            background-clip: padding-box;
        }

        /* Ù‡Ù†Ú¯Ø§Ù… Ø¨Ø§Ø² Ø¨ÙˆØ¯Ù† selectØŒ Ù¾Ø³â€ŒØ²Ù…ÛŒÙ†Ù‡â€ŒÛŒ Ú©Ø§Ø¯Ø± Ø¯Ù‚ÛŒÙ‚Ø§ Ù‡Ù…â€ŒØ±Ù†Ú¯ ÙˆØ§Ù„Ø¯ Ø¨Ø§Ø´Ø¯ (Ø¨Ø¯ÙˆÙ† Ø±ÙˆØ´Ù†â€ŒØªØ± Ø´Ø¯Ù†) */
        #jobType[size]:not([size="0"]),
        #dailyWorkCount[size]:not([size="0"]) {
            background: var(--select-open-bg) !important;
            background-clip: padding-box;
        }

        /* Ú¯Ø²ÛŒÙ†Ù‡â€ŒÙ‡Ø§ Ø¯Ø± Ø­Ø§Ù„Øª Ø¨Ø§Ø² Ø§Ø² Ù¾Ø³â€ŒØ²Ù…ÛŒÙ†Ù‡â€ŒÛŒ Ø®ÙˆØ¯ Ú©Ø§Ø¯Ø± Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†Ù†Ø¯ */
        #jobType[size]:not([size="0"]) option,
        #dailyWorkCount[size]:not([size="0"]) option {
            background: transparent;
        }

        /* Ø­Ø§Ù„Øª Ù‡Ø§ÙˆØ± Ùˆ Ø§Ù†ØªØ®Ø§Ø¨â€ŒØ´Ø¯Ù‡ Ù‡Ù…Ú†Ù†Ø§Ù† Ù‚Ø§Ø¨Ù„ ØªØ´Ø®ÛŒØµ Ø¨Ù…Ø§Ù†Ø¯ */
        #jobType[size]:not([size="0"]) option:hover,
        #dailyWorkCount[size]:not([size="0"]) option:hover {
            background: #7877c6;
        }

        /* ÛŒÚ©Ø³Ø§Ù†â€ŒØ³Ø§Ø²ÛŒ Ø±Ù†Ú¯ Ú¯Ø²ÛŒÙ†Ù‡ Ø§Ù†ØªØ®Ø§Ø¨â€ŒØ´Ø¯Ù‡ Ùˆ ÙÙˆÚ©ÙˆØ³â€ŒØ´Ø¯Ù‡ (Ø¨Ø±Ø§ÛŒ Ø¨Ø±Ø®ÛŒ Ù…Ø±ÙˆØ±Ú¯Ø±Ù‡Ø§) */
        #jobType option:checked, #dailyWorkCount option:checked,
        #jobType option:focus,   #dailyWorkCount option:focus {
            background: #7877c6;
            color: #ffffff;
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="logo-section">
            <div class="logo-icon">ğŸ”</div>
            <div class="logo-text">
                <h1>Phoenix TechWorks Group</h1>
                <p>Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯ Ù…Ø¯ÛŒØ±ÛŒØª</p>
            </div>
        </div>
        <div class="user-info">
            <div class="user-avatar">A</div>
            <span>Ù…Ø¯ÛŒØ± Ø³ÛŒØ³ØªÙ…</span>
            <button class="logout-btn" onclick="logout()">Ø®Ø±ÙˆØ¬</button>
        </div>
    </div>

    <div class="container">
        <div class="dashboard-title">
            <h2>Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯ Ù…Ø¯ÛŒØ±ÛŒØª Ú©Ø§Ø±Ø¨Ø±Ø§Ù†</h2>
            <p>Ù…Ø¯ÛŒØ±ÛŒØª Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ù¾Ø±Ø³Ù†Ù„ Ùˆ Ú©Ø§Ø±Ø¨Ø±Ø§Ù† Ø³ÛŒØ³ØªÙ…</p>
        </div>

        <div class="admin-panel">
            <div class="panel-header">
                <div class="panel-title">
                    ğŸ‘¥ Ù…Ø¯ÛŒØ±ÛŒØª Ú©Ø§Ø±Ø¨Ø±Ø§Ù†
                </div>
                <button class="add-user-btn" onclick="openAddUserModal()">
                    â• Ø§ÙØ²ÙˆØ¯Ù† Ú©Ø§Ø±Ø¨Ø± Ø¬Ø¯ÛŒØ¯
                </button>
            </div>

            <div class="search-box">
                <input type="text" id="searchInput" placeholder="Ø¬Ø³ØªØ¬Ùˆ Ø¨Ø± Ø§Ø³Ø§Ø³ Ù†Ø§Ù…ØŒ Ú©Ø¯ Ù…Ù„ÛŒØŒ Ø§ÛŒÙ…ÛŒÙ„..." oninput="searchUsers()">
                <span class="search-icon">ğŸ”</span>
            </div>

            <div id="usersTableContainer">
                <table class="users-table">
                    <thead>
                        <tr>
                            <th>Ù†Ø§Ù… Ùˆ Ù†Ø§Ù… Ø®Ø§Ù†ÙˆØ§Ø¯Ú¯ÛŒ</th>
                            <th>Ú©Ø¯ Ù…Ù„ÛŒ</th>
                            <th>Ø§ÛŒÙ…ÛŒÙ„</th>
                            <th>Ø´Ù†Ø§Ø³Ù‡ Ù¾Ø±Ø³Ù†Ù„ÛŒ</th>
                            <th>Ù†ÙˆØ¹ Ú©Ø§Ø±</th>
                            <th>ÙˆØ¶Ø¹ÛŒØª</th>
                            <th>Ø¹Ù…Ù„ÛŒØ§Øª</th>
                        </tr>
                    </thead>
                    <tbody id="usersTableBody">
                        <!-- Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Ú©Ø§Ø±Ø¨Ø±Ø§Ù† Ø§ÛŒÙ†Ø¬Ø§ Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯ -->
                    </tbody>
                </table>
                <div id="emptyState" class="empty-state" style="display: none;">
                    <div class="empty-state-icon">ğŸ‘¤</div>
                    <h3>Ù‡ÛŒÚ† Ú©Ø§Ø±Ø¨Ø±ÛŒ ÛŒØ§ÙØª Ù†Ø´Ø¯</h3>
                    <p>Ø¨Ø±Ø§ÛŒ Ø´Ø±ÙˆØ¹ØŒ Ú©Ø§Ø±Ø¨Ø± Ø¬Ø¯ÛŒØ¯ÛŒ Ø§Ø¶Ø§ÙÙ‡ Ú©Ù†ÛŒØ¯</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Ø§ÙØ²ÙˆØ¯Ù†/ÙˆÛŒØ±Ø§ÛŒØ´ Ú©Ø§Ø±Ø¨Ø± -->
    <div id="userModal" class="modal">
        <div class="modal-content">
                                <div class="modal-header">
                        <h3 id="modalTitle">Ø§ÙØ²ÙˆØ¯Ù† Ú©Ø§Ø±Ø¨Ø± Ø¬Ø¯ÛŒØ¯</h3>
                        <div>
                            <button type="button" class="btn btn-secondary" onclick="fillSampleData()" style="margin-left: 10px;">Ù¾Ø± Ú©Ø±Ø¯Ù† Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Ù†Ù…ÙˆÙ†Ù‡</button>
                            <button type="button" class="close-btn" onclick="closeUserModal()">&times;</button>
                        </div>
                    </div>
            <div class="modal-body">
                <form id="userForm">
                    <!-- Ø¨Ø®Ø´ Ø¢Ù¾Ù„ÙˆØ¯ Ø¹Ú©Ø³ -->
                    <div class="form-section">
                        <h4>Ø¹Ú©Ø³ Ù¾Ø±Ø³Ù†Ù„ÛŒ</h4>
                        <div class="form-group photo-upload">
                            <div class="photo-preview" id="photoPreview">
                                <img id="previewImage" src="" alt="Ù¾ÛŒØ´â€ŒÙ†Ù…Ø§ÛŒØ´ Ø¹Ú©Ø³" style="display: none;">
                                <div class="no-photo" id="noPhotoText">
                                    <i style="font-size: 48px;">ğŸ“·</i>
                                    <p>Ø¹Ú©Ø³ Ø§Ù†ØªØ®Ø§Ø¨ Ù†Ø´Ø¯Ù‡</p>
                                </div>
                            </div>
                            <div class="photo-controls">
                                <input type="file" id="userPhoto" name="userPhoto" accept="image/*" style="display: none;">
                                <button type="button" class="btn btn-secondary" onclick="document.getElementById('userPhoto').click()">Ø§Ù†ØªØ®Ø§Ø¨ Ø¹Ú©Ø³</button>
                                <button type="button" class="btn btn-danger" onclick="removePhoto()" id="removePhotoBtn" style="display: none;">Ø­Ø°Ù Ø¹Ú©Ø³</button>
                            </div>
                        </div>
                    </div>

                    <div class="form-grid">
                        <div class="form-group">
                            <label for="firstName">Ù†Ø§Ù… *</label>
                            <input type="text" id="firstName" name="firstName" required>
                        </div>
                        <div class="form-group">
                            <label for="lastName">Ù†Ø§Ù… Ø®Ø§Ù†ÙˆØ§Ø¯Ú¯ÛŒ *</label>
                            <input type="text" id="lastName" name="lastName" required>
                        </div>
                        <div class="form-group">
                            <label for="fatherName">Ù†Ø§Ù… Ù¾Ø¯Ø±</label>
                            <input type="text" id="fatherName" name="fatherName">
                        </div>
                        <div class="form-group">
                            <label for="nationalId">Ú©Ø¯ Ù…Ù„ÛŒ *</label>
                            <input type="text" id="nationalId" name="nationalId" required maxlength="10">
                        </div>
                        <div class="form-group">
                            <label for="birthPlace">Ù…Ø­Ù„ ØªÙˆÙ„Ø¯</label>
                            <input type="text" id="birthPlace" name="birthPlace">
                        </div>
                        <div class="form-group full-width">
                            <label>ØªØ§Ø±ÛŒØ® ØªÙˆÙ„Ø¯</label>
                            <div class="date-group">
                                <div class="date-input-group">
                                    <label for="birthDateShamsi">Ø´Ù…Ø³ÛŒ</label>
                                    <div class="date-input-wrapper">
                                        <input type="text" id="birthDateShamsi" name="birthDateShamsi" placeholder="1370/01/01" onchange="convertShamsiToMiladi('birth')" onclick="showPersianCalendar('birth', 'shamsi')">
                                        <span class="calendar-icon" onclick="showPersianCalendar('birth', 'shamsi')"><svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11zM7 10h5v5H7z" fill="currentColor"/></svg></span>
                                    </div>
                                </div>
                                <div class="date-input-group">
                                    <label for="birthDateMiladi">Ù…ÛŒÙ„Ø§Ø¯ÛŒ</label>
                                    <div class="date-input-wrapper">
                                        <input type="date" id="birthDateMiladi" name="birthDateMiladi" onchange="convertMiladiToShamsi('birth')" onclick="openNativeDatePicker('birthDateMiladi')">
                                        <span class="calendar-icon" onclick="openNativeDatePicker('birthDateMiladi')">
                                            <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                <path d="M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11zM7 10h5v5H7z" fill="currentColor"/>
                                            </svg>
                                        </span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="mobile">Ø´Ù…Ø§Ø±Ù‡ Ù…ÙˆØ¨Ø§ÛŒÙ„ *</label>
                            <input type="tel" id="mobile" name="mobile" required>
                        </div>
                        <div class="form-group">
                            <label for="phone">Ø´Ù…Ø§Ø±Ù‡ ØªÙ„ÙÙ† Ù…Ù†Ø²Ù„</label>
                            <input type="tel" id="phone" name="phone">
                        </div>
                        <div class="form-group" style="grid-column: 1 / -1;">
                            <label for="address">Ø¢Ø¯Ø±Ø³ Ù…Ù†Ø²Ù„</label>
                            <textarea id="address" name="address" rows="3"></textarea>
                        </div>
                        <div class="form-group">
                            <label for="employeeId">Ø´Ù†Ø§Ø³Ù‡ Ù¾Ø±Ø³Ù†Ù„ÛŒ *</label>
                            <input type="text" id="employeeId" name="employeeId" required>
                        </div>
                        <div class="form-group">
                            <label for="email">Ø§ÛŒÙ…ÛŒÙ„ *</label>
                            <input type="email" id="email" name="email" required>
                        </div>
                        <div class="form-group">
                            <label for="jobType">Ù†ÙˆØ¹ Ú©Ø§Ø±</label>
                            <select id="jobType" name="jobType">
                                <option value="">Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯</option>
                                <option value="simple-a">Ú©Ø§Ø± Ø³Ø§Ø¯Ù‡ Ù†ÙˆØ¹ A</option>
                                <option value="simple-b">Ú©Ø§Ø± Ø³Ø§Ø¯Ù‡ Ù†ÙˆØ¹ B</option>
                                <option value="simple-c">Ú©Ø§Ø± Ø³Ø§Ø¯Ù‡ Ù†ÙˆØ¹ C</option>
                                <option value="advanced-a">Ú©Ø§Ø±Ø§Ù„Ú¯ÙˆØ±ÛŒØªÙ… Ù¾ÛŒØ´Ø±ÙØªÙ‡ Ù†ÙˆØ¹ A</option>
                                <option value="advanced-b">Ú©Ø§Ø±Ø§Ù„Ú¯ÙˆØ±ÛŒØªÙ… Ù¾ÛŒØ´Ø±ÙØªÙ‡ Ù†ÙˆØ¹ B</option>
                                <option value="advanced-c">Ú©Ø§Ø±Ø§Ù„Ú¯ÙˆØ±ÛŒØªÙ… Ù¾ÛŒØ´Ø±ÙØªÙ‡ Ù†ÙˆØ¹ C</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="dailyWorkCount">ØªØ¹Ø¯Ø§Ø¯ Ú©Ø§Ø± Ø±ÙˆØ²Ø§Ù†Ù‡</label>
                            <select id="dailyWorkCount" name="dailyWorkCount">
                                <option value="">Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯</option>
                                <option value="100">100</option>
                                <option value="200">200</option>
                                <option value="300">300</option>
                                <option value="400">400</option>
                                <option value="500">500</option>
                                <option value="600">600</option>
                                <option value="700">700</option>
                                <option value="800">800</option>
                                <option value="900">900</option>
                                <option value="1000">1000</option>
                                <option value="1100">1100</option>
                                <option value="1200">1200</option>
                                <option value="1300">1300</option>
                                <option value="1400">1400</option>
                                <option value="1500">1500</option>
                                <option value="1600">1600</option>
                                <option value="1700">1700</option>
                                <option value="1800">1800</option>
                                <option value="1900">1900</option>
                                <option value="2000">2000</option>
                                <option value="2100">2100</option>
                                <option value="2200">2200</option>
                                <option value="2300">2300</option>
                                <option value="2400">2400</option>
                                <option value="2500">2500</option>
                                <option value="2600">2600</option>
                                <option value="2700">2700</option>
                                <option value="2800">2800</option>
                                <option value="2900">2900</option>
                                <option value="3000">3000</option>
                                <option value="3100">3100</option>
                                <option value="3200">3200</option>
                                <option value="3300">3300</option>
                                <option value="3400">3400</option>
                                <option value="3500">3500</option>
                                <option value="3600">3600</option>
                                <option value="3700">3700</option>
                                <option value="3800">3800</option>
                                <option value="3900">3900</option>
                                <option value="4000">4000</option>
                                <option value="4100">4100</option>
                                <option value="4200">4200</option>
                                <option value="4300">4300</option>
                                <option value="4400">4400</option>
                                <option value="4500">4500</option>
                                <option value="4600">4600</option>
                                <option value="4700">4700</option>
                                <option value="4800">4800</option>
                                <option value="4900">4900</option>
                                <option value="5000">5000</option>
                                <option value="5100">5100</option>
                                <option value="5200">5200</option>
                                <option value="5300">5300</option>
                                <option value="5400">5400</option>
                                <option value="5500">5500</option>
                                <option value="5600">5600</option>
                                <option value="5700">5700</option>
                                <option value="5800">5800</option>
                                <option value="5900">5900</option>
                                <option value="6000">6000</option>
                                <option value="6100">6100</option>
                                <option value="6200">6200</option>
                                <option value="6300">6300</option>
                                <option value="6400">6400</option>
                                <option value="6500">6500</option>
                                <option value="6600">6600</option>
                                <option value="6700">6700</option>
                                <option value="6800">6800</option>
                                <option value="6900">6900</option>
                                <option value="7000">7000</option>
                                <option value="7100">7100</option>
                                <option value="7200">7200</option>
                                <option value="7300">7300</option>
                                <option value="7400">7400</option>
                                <option value="7500">7500</option>
                                <option value="7600">7600</option>
                                <option value="7700">7700</option>
                                <option value="7800">7800</option>
                                <option value="7900">7900</option>
                                <option value="8000">8000</option>
                                <option value="8100">8100</option>
                                <option value="8200">8200</option>
                                <option value="8300">8300</option>
                                <option value="8400">8400</option>
                                <option value="8500">8500</option>
                                <option value="8600">8600</option>
                                <option value="8700">8700</option>
                                <option value="8800">8800</option>
                                <option value="8900">8900</option>
                                <option value="9000">9000</option>
                                <option value="9100">9100</option>
                                <option value="9200">9200</option>
                                <option value="9300">9300</option>
                                <option value="9400">9400</option>
                                <option value="9500">9500</option>
                                <option value="9600">9600</option>
                                <option value="9700">9700</option>
                                <option value="9800">9800</option>
                                <option value="9900">9900</option>
                                <option value="10000">10000</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="contractDuration">Ù…Ø¯Øª Ù‚Ø±Ø§Ø±Ø¯Ø§Ø¯ (Ù…Ø§Ù‡)</label>
                            <input type="number" id="contractDuration" name="contractDuration" min="1" oninput="calculateEndDate()">
                        </div>
                        <div class="form-group full-width">
                            <label>ØªØ§Ø±ÛŒØ® Ø´Ø±ÙˆØ¹ Ù‚Ø±Ø§Ø±Ø¯Ø§Ø¯</label>
                            <div class="date-group">
                                <div class="date-input-group">
                                    <label for="contractStartShamsi">Ø´Ù…Ø³ÛŒ</label>
                                    <div class="date-input-wrapper">
                                        <input type="text" id="contractStartShamsi" name="contractStartShamsi" placeholder="1403/01/01" onchange="convertShamsiToMiladi('contractStart'); calculateEndDate();" onclick="showPersianCalendar('contractStart', 'shamsi')">
                                        <span class="calendar-icon" onclick="showPersianCalendar('contractStart', 'shamsi')"><svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11zM7 10h5v5H7z" fill="currentColor"/></svg></span>
                                    </div>
                                </div>
                                <div class="date-input-group">
                                    <label for="contractStartMiladi">Ù…ÛŒÙ„Ø§Ø¯ÛŒ</label>
                                    <div class="date-input-wrapper">
                                        <input type="date" id="contractStartMiladi" name="contractStartMiladi" onchange="convertMiladiToShamsi('contractStart'); calculateEndDate();" onclick="openNativeDatePicker('contractStartMiladi')">
                                        <span class="calendar-icon" onclick="openNativeDatePicker('contractStartMiladi')">
                                            <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                <path d="M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11zM7 10h5v5H7z" fill="currentColor"/>
                                            </svg>
                                        </span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="form-group">
                            <label>ØªØ§Ø±ÛŒØ® Ù¾Ø§ÛŒØ§Ù† Ù‚Ø±Ø§Ø±Ø¯Ø§Ø¯</label>
                            <div class="date-group">
                                <div class="date-input-group">
                                    <label for="contractEndShamsi">Ø´Ù…Ø³ÛŒ</label>
                                    <input type="text" id="contractEndShamsi" name="contractEndShamsi" readonly>
                                </div>
                                <div class="date-input-group">
                                    <label for="contractEndMiladi">Ù…ÛŒÙ„Ø§Ø¯ÛŒ</label>
                                    <div class="date-input-wrapper">
                                        <input type="date" id="contractEndMiladi" name="contractEndMiladi" readonly>
                                        <span class="calendar-icon" style="pointer-events: none; opacity: 0.5;">
                                            <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                <path d="M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11zM7 10h5v5H7z" fill="currentColor"/>
                                            </svg>
                                        </span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="form-actions">
                        <button type="button" class="btn btn-secondary" onclick="closeUserModal()">Ø§Ù†ØµØ±Ø§Ù</button>
                        <button type="submit" class="btn btn-primary" id="submitBtn">Ø°Ø®ÛŒØ±Ù‡ Ú©Ø§Ø±Ø¨Ø±</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <script src="persian-date.js?v=2"></script>
    <script>
        // ØªØ³Øª Ø§ÙˆÙ„ÛŒÙ‡ ØªØ¨Ø¯ÛŒÙ„ ØªØ§Ø±ÛŒØ®
        console.log('ğŸ§ª ØªØ³Øª Ú©ØªØ§Ø¨Ø®Ø§Ù†Ù‡ ØªØ¨Ø¯ÛŒÙ„ ØªØ§Ø±ÛŒØ®:');
        try {
            const testPersianDate = new PersianDate();
            console.log('âœ… Ú©ØªØ§Ø¨Ø®Ø§Ù†Ù‡ PersianDate Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø´Ø¯');
            
            // ØªØ³Øª 24 Ø¢Ø°Ø± 1366 -> 15 Ø¯Ø³Ø§Ù…Ø¨Ø± 1987
            const testResult1 = testPersianDate.shamsiToMiladi(1366, 9, 24);
            console.log('ğŸ“… ØªØ³Øª ØªØ¨Ø¯ÛŒÙ„: 1366/09/24 Ø´Ù…Ø³ÛŒ =', testResult1);
            console.log('Ø§Ù†ØªØ¸Ø§Ø±: 15 Ø¯Ø³Ø§Ù…Ø¨Ø± 1987');
            
            // ØªØ³Øª Ù…Ø¹Ú©ÙˆØ³: 15 Ø¯Ø³Ø§Ù…Ø¨Ø± 1987 -> 24 Ø¢Ø°Ø± 1366
            const testResult2 = testPersianDate.miladiToShamsi(1987, 12, 15);
            console.log('ğŸ“… ØªØ³Øª Ù…Ø¹Ú©ÙˆØ³: 15/12/1987 Ù…ÛŒÙ„Ø§Ø¯ÛŒ =', testResult2);
            console.log('Ø§Ù†ØªØ¸Ø§Ø±: 24 Ø¢Ø°Ø± 1366');
            
        } catch (error) {
            console.error('âŒ Ø®Ø·Ø§ Ø¯Ø± Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ú©ØªØ§Ø¨Ø®Ø§Ù†Ù‡:', error);
        }

        let users = [];
        let editingUserId = null;

        // ØªØ¨Ø¯ÛŒÙ„ ØªØ§Ø±ÛŒØ® Ø´Ù…Ø³ÛŒ Ø¨Ù‡ Ù…ÛŒÙ„Ø§Ø¯ÛŒ
        function convertShamsiToMiladi(type) {
            const shamsiInput = document.getElementById(type + 'DateShamsi') || document.getElementById(type + 'Shamsi');
            const miladiInput = document.getElementById(type + 'DateMiladi') || document.getElementById(type + 'Miladi');
            
            if (shamsiInput && miladiInput && shamsiInput.value) {
                try {
                    const shamsiParts = shamsiInput.value.split('/');
                    if (shamsiParts.length === 3) {
                        const year = parseInt(shamsiParts[0]);
                        const month = parseInt(shamsiParts[1]);
                        const day = parseInt(shamsiParts[2]);
                        
                        // Ø¨Ø±Ø±Ø³ÛŒ Ù…Ø¹ØªØ¨Ø± Ø¨ÙˆØ¯Ù† ØªØ§Ø±ÛŒØ®
                        if (year > 0 && month >= 1 && month <= 12 && day >= 1 && day <= 31) {
                            // Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Ú©ØªØ§Ø¨Ø®Ø§Ù†Ù‡ PersianDate
                            const persianDate = new PersianDate();
                            const gregorianDate = persianDate.shamsiToMiladi(year, month, day);
                            
                            // ØªØ¨Ø¯ÛŒÙ„ Ø¨Ù‡ ÙØ±Ù…Øª ISO Ø¨Ø±Ø§ÛŒ input Ù…ÛŒÙ„Ø§Ø¯ÛŒ
                            const miladiFormatted = `${gregorianDate.year}-${gregorianDate.month.toString().padStart(2, '0')}-${gregorianDate.day.toString().padStart(2, '0')}`;
                            miladiInput.value = miladiFormatted;
                            
                            if (type === 'contractStart') {
                                
                            }
                        }
                    }
                } catch (error) {
                    console.error('Ø®Ø·Ø§ Ø¯Ø± ØªØ¨Ø¯ÛŒÙ„ ØªØ§Ø±ÛŒØ® Ø´Ù…Ø³ÛŒ:', error);
                    miladiInput.value = '';
                }
            }
        }

        // ØªØ¨Ø¯ÛŒÙ„ ØªØ§Ø±ÛŒØ® Ù…ÛŒÙ„Ø§Ø¯ÛŒ Ø¨Ù‡ Ø´Ù…Ø³ÛŒ
        function convertMiladiToShamsi(type) {
            const miladiInput = document.getElementById(type + 'DateMiladi') || document.getElementById(type + 'Miladi');
            const shamsiInput = document.getElementById(type + 'DateShamsi') || document.getElementById(type + 'Shamsi');
            
            if (miladiInput && shamsiInput && miladiInput.value) {
                try {
                    const miladiDate = new Date(miladiInput.value);
                    const year = miladiDate.getFullYear();
                    const month = miladiDate.getMonth() + 1;
                    const day = miladiDate.getDate();
                    
                    // Ø¨Ø±Ø±Ø³ÛŒ Ù…Ø¹ØªØ¨Ø± Ø¨ÙˆØ¯Ù† ØªØ§Ø±ÛŒØ®
                    if (!isNaN(miladiDate.getTime())) {
                        // Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Ú©ØªØ§Ø¨Ø®Ø§Ù†Ù‡ PersianDate Ø¨Ø±Ø§ÛŒ ØªØ¨Ø¯ÛŒÙ„ Ù…Ø¹Ú©ÙˆØ³
                        const persianDate = new PersianDate();
                        const shamsiDate = persianDate.miladiToShamsi(year, month, day);
                        shamsiInput.value = `${shamsiDate.year}/${shamsiDate.month.toString().padStart(2, '0')}/${shamsiDate.day.toString().padStart(2, '0')}`;
                        
                        if (type === 'contractStart') {
                            
                        }
                    }
                } catch (error) {
                    console.error('Ø®Ø·Ø§ Ø¯Ø± ØªØ¨Ø¯ÛŒÙ„ ØªØ§Ø±ÛŒØ® Ù…ÛŒÙ„Ø§Ø¯ÛŒ:', error);
                    shamsiInput.value = '';
                }
            }
        }

        /* Ø¨Ø§Ø² Ú©Ø±Ø¯Ù† Ø§Ù†ØªØ®Ø§Ø¨â€ŒÚ¯Ø± ØªØ§Ø±ÛŒØ® Ø¨ÙˆÙ…ÛŒ Ø¨Ø±Ø§ÛŒ input[type=date] */
        function openNativeDatePicker(inputId) {
            const el = document.getElementById(inputId);
            if (!el) return;
            try {
                if (typeof el.showPicker === 'function') {
                    el.showPicker();
                    return;
                }
            } catch (e) {}
            // fallback Ø¨Ø±Ø§ÛŒ Ù…Ø±ÙˆØ±Ú¯Ø±Ù‡Ø§ÛŒ Ù‚Ø¯ÛŒÙ…ÛŒâ€ŒØªØ±
            el.focus();
            el.click();
        }

        // --- Auto-open native date picker when clicking on the input itself or wrapper (not only the icon)
        (function wireDateInputsAutoOpen() {
            function tryOpen(el) {
                try {
                    if (typeof el.showPicker === 'function') {
                        el.showPicker();
                        return;
                    }
                } catch (e) {}
                // Fallback: focus (some browsers open picker on focus)
                el.focus();
            }
            // Wire inputs directly
            document.querySelectorAll('.date-input-wrapper input[type="date"]:not([readonly])').forEach(function(el){
                if (el.dataset.pickerWired === '1') return;
                el.dataset.pickerWired = '1';
                el.addEventListener('click', function(){ tryOpen(el); });
                el.addEventListener('keydown', function(ev){
                    if (ev.key === 'Enter' || ev.key === ' ') {
                        ev.preventDefault();
                        tryOpen(el);
                    }
                });
            });
            // Also allow clicking anywhere inside the wrapper to open
            document.querySelectorAll('.date-input-wrapper').forEach(function(wrapper){
                const dateInput = wrapper.querySelector('input[type="date"]:not([readonly])');
                if (!dateInput) return;
                if (wrapper.dataset.pickerWired === '1') return;
                wrapper.dataset.pickerWired = '1';
                wrapper.addEventListener('click', function(e){
                    // If click wasn't directly on the input or icon, still open
                    if (e.target !== dateInput && !e.target.closest('.calendar-icon')) {
                        tryOpen(dateInput);
                    }
                });
            });
        })();

        // Ù†Ù…Ø§ÛŒØ´ ØªÙ‚ÙˆÛŒÙ… Ø´Ù…Ø³ÛŒ
        function showPersianCalendar(type, dateType) {
            // Ø§ÛŒØ¬Ø§Ø¯ backdrop
            const backdrop = document.createElement('div');
            backdrop.id = 'calendarBackdrop';
            backdrop.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0,0,0,0.5);
                z-index: 9999;
            `;
            backdrop.onclick = function() { closePersianCalendar(); };
            
            // ØªØ§Ø±ÛŒØ® ÙØ¹Ù„ÛŒ - Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² ØªØ§Ø±ÛŒØ® Ø³Ø§Ø¯Ù‡
            const today = new Date();
            let currentYear = 1404; // Ø³Ø§Ù„ ÙØ¹Ù„ÛŒ Ø´Ù…Ø³ÛŒ
            let currentMonth = 6; // Ù…Ù‡Ø± Ù…Ø§Ù‡
            
            // Ø§Ú¯Ø± Ù…Ù‚Ø¯Ø§Ø± Ù‚Ø¨Ù„ÛŒ ÙˆØ¬ÙˆØ¯ Ø¯Ø§Ø±Ø¯ØŒ Ø§Ø² Ø¢Ù† Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†
            const input = document.getElementById(type + 'DateShamsi') || document.getElementById(type + 'Shamsi');
            if (input && input.value) {
                const parts = input.value.split('/');
                if (parts.length === 3) {
                    currentYear = parseInt(parts[0]);
                    currentMonth = parseInt(parts[1]);
                }
            }
            
            // Ø§ÛŒØ¬Ø§Ø¯ Ø¹Ù†ØµØ± ØªÙ‚ÙˆÛŒÙ…
            const calendarDiv = document.createElement('div');
            calendarDiv.id = 'persianCalendar';
            calendarDiv.style.cssText = `
                position: fixed;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%);
                border: 2px solid #3498db;
                border-radius: 15px;
                padding: 25px;
                z-index: 10000;
                box-shadow: 0 15px 35px rgba(52, 152, 219, 0.3), 0 5px 15px rgba(0,0,0,0.1);
                width: 350px;
                font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
                direction: rtl;
                text-align: center;
                color: #2c3e50;
            `;
            
            function getDaysInMonth(year, month) {
                // ØªØ¹Ø¯Ø§Ø¯ Ø±ÙˆØ²Ù‡Ø§ÛŒ Ù‡Ø± Ù…Ø§Ù‡ Ø´Ù…Ø³ÛŒ
                const daysInMonths = [31, 31, 31, 31, 31, 31, 30, 30, 30, 30, 30, 29];
                if (month <= 12) {
                    // Ø¨Ø±Ø±Ø³ÛŒ Ø³Ø§Ù„ Ú©Ø¨ÛŒØ³Ù‡ Ø¨Ø±Ø§ÛŒ Ø§Ø³ÙÙ†Ø¯
                    if (month === 12) {
                        return ((year % 33) % 4 === 1) ? 30 : 29;
                    }
                    return daysInMonths[month - 1];
                }
                return 30;
            }
            
            function renderCalendar() {
                const monthNames = ['ÙØ±ÙˆØ±Ø¯ÛŒÙ†', 'Ø§Ø±Ø¯ÛŒØ¨Ù‡Ø´Øª', 'Ø®Ø±Ø¯Ø§Ø¯', 'ØªÛŒØ±', 'Ù…Ø±Ø¯Ø§Ø¯', 'Ø´Ù‡Ø±ÛŒÙˆØ±', 'Ù…Ù‡Ø±', 'Ø¢Ø¨Ø§Ù†', 'Ø¢Ø°Ø±', 'Ø¯ÛŒ', 'Ø¨Ù‡Ù…Ù†', 'Ø§Ø³ÙÙ†Ø¯'];
                const daysInMonth = getDaysInMonth(currentYear, currentMonth);
                
                // Ø§ÛŒØ¬Ø§Ø¯ dropdown Ø³Ø§Ù„
                let yearOptions = '';
                const startYear = 1350;
                const endYear = 1450;
                for (let year = startYear; year <= endYear; year++) {
                    const isActive = year === currentYear ? 'background: #3498db; color: white;' : 'background: white; color: #2c3e50;';
                    yearOptions += `<div onclick="selectYear(${year})" style="padding: 8px 12px; cursor: pointer; ${isActive} transition: all 0.2s;" onmouseover="if(${year} !== ${currentYear}) this.style.backgroundColor='#f8f9fa';" onmouseout="if(${year} !== ${currentYear}) this.style.backgroundColor='white';">${year}</div>`;
                }

                let calendarHTML = `
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; background: #3498db; color: white; padding: 15px; border-radius: 10px; margin: -10px -10px 20px -10px;">
                        <button type="button" onclick="changeMonth(-1)" style="background: rgba(255,255,255,0.2); color: white; border: none; border-radius: 50%; width: 35px; height: 35px; cursor: pointer; font-size: 16px; transition: all 0.3s;" onmouseover="this.style.background='rgba(255,255,255,0.3)'" onmouseout="this.style.background='rgba(255,255,255,0.2)'">&lt;</button>
                        <div style="display: flex; flex-direction: column; align-items: center; gap: 8px;">
                            <span style="font-weight: bold; font-size: 16px; color: white;">${monthNames[currentMonth - 1]}</span>
                            <div style="position: relative;">
                                <button type="button" id="yearDropdownBtn" onclick="toggleYearDropdown()" style="background: rgba(255,255,255,0.9); color: #2c3e50; border: none; border-radius: 8px; padding: 6px 12px; font-size: 14px; font-weight: bold; cursor: pointer; text-align: center; outline: none; min-width: 60px;">
                                    ${currentYear} â–¼
                                </button>
                                <div id="yearDropdownMenu" style="display: none; position: absolute; top: 100%; left: 50%; transform: translateX(-50%); background: white; border: 1px solid #ddd; border-radius: 8px; box-shadow: 0 4px 12px rgba(0,0,0,0.15); max-height: 200px; overflow-y: auto; z-index: 1000; min-width: 80px;">
                                    ${yearOptions}
                                </div>
                            </div>
                        </div>
                        <button type="button" onclick="changeMonth(1)" style="background: rgba(255,255,255,0.2); color: white; border: none; border-radius: 50%; width: 35px; height: 35px; cursor: pointer; font-size: 16px; transition: all 0.3s;" onmouseover="this.style.background='rgba(255,255,255,0.3)'" onmouseout="this.style.background='rgba(255,255,255,0.2)'">&gt;</button>
                    </div>
                    <div style="display: grid; grid-template-columns: repeat(7, 1fr); gap: 3px; text-align: center; margin-bottom: 15px;">
                        <div style="font-weight: bold; padding: 10px; background: #f39c12; color: white; border-radius: 8px; font-size: 14px;">Ø´</div>
                        <div style="font-weight: bold; padding: 10px; background: #f39c12; color: white; border-radius: 8px; font-size: 14px;">ÛŒ</div>
                        <div style="font-weight: bold; padding: 10px; background: #f39c12; color: white; border-radius: 8px; font-size: 14px;">Ø¯</div>
                        <div style="font-weight: bold; padding: 10px; background: #f39c12; color: white; border-radius: 8px; font-size: 14px;">Ø³</div>
                        <div style="font-weight: bold; padding: 10px; background: #f39c12; color: white; border-radius: 8px; font-size: 14px;">Ú†</div>
                        <div style="font-weight: bold; padding: 10px; background: #f39c12; color: white; border-radius: 8px; font-size: 14px;">Ù¾</div>
                        <div style="font-weight: bold; padding: 10px; background: #f39c12; color: white; border-radius: 8px; font-size: 14px;">Ø¬</div>
                `;
                
                // Ù…Ø­Ø§Ø³Ø¨Ù‡ Ø±ÙˆØ² Ø§ÙˆÙ„ Ù…Ø§Ù‡ (Ø³Ø§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ Ø´Ø¯Ù‡)
                const firstDayOfWeek = (currentYear + currentMonth) % 7;
                
                // Ø±ÙˆØ²Ù‡Ø§ÛŒ Ø®Ø§Ù„ÛŒ Ø§Ø¨ØªØ¯Ø§ÛŒ Ù…Ø§Ù‡
                for (let i = 0; i < firstDayOfWeek; i++) {
                    calendarHTML += '<div style="padding: 12px; opacity: 0.3;"></div>';
                }
                
                // Ø±ÙˆØ²Ù‡Ø§ÛŒ Ù…Ø§Ù‡
                for (let day = 1; day <= daysInMonth; day++) {
                    calendarHTML += `<div style="padding: 12px; cursor: pointer; border-radius: 8px; border: 1px solid #e8f4fd; background: white; color: #2c3e50; font-weight: 500; transition: all 0.3s; font-size: 14px;" onclick="selectDate(${day})" onmouseover="this.style.backgroundColor='#3498db'; this.style.color='white'; this.style.transform='scale(1.1)'" onmouseout="this.style.backgroundColor='white'; this.style.color='#2c3e50'; this.style.transform='scale(1)'">${day}</div>`;
                }
                
                calendarHTML += `
                    </div>
                    <div style="margin-top: 20px; text-align: center; border-top: 1px solid #e8f4fd; padding-top: 15px;">
                        <button type="button" onclick="selectToday()" style="background: linear-gradient(135deg, #f39c12, #e67e22); color: white; border: none; border-radius: 25px; padding: 10px 20px; cursor: pointer; margin-left: 10px; font-weight: 500; transition: all 0.3s; box-shadow: 0 3px 10px rgba(243, 156, 18, 0.3);" onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 5px 15px rgba(243, 156, 18, 0.4)'" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 3px 10px rgba(243, 156, 18, 0.3)'">Ø§Ù…Ø±ÙˆØ²</button>
                        <button type="button" onclick="closePersianCalendar()" style="background: linear-gradient(135deg, #95a5a6, #7f8c8d); color: white; border: none; border-radius: 25px; padding: 10px 20px; cursor: pointer; font-weight: 500; transition: all 0.3s; box-shadow: 0 3px 10px rgba(149, 165, 166, 0.3);" onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 5px 15px rgba(149, 165, 166, 0.4)'" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 3px 10px rgba(149, 165, 166, 0.3)'">Ø¨Ø³ØªÙ†</button>
                    </div>
                `;
                
                calendarDiv.innerHTML = calendarHTML;
            }
            
            // Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† backdrop Ùˆ ØªÙ‚ÙˆÛŒÙ… Ø¨Ù‡ ØµÙØ­Ù‡
            document.body.appendChild(backdrop);
            document.body.appendChild(calendarDiv);
            
            // ØªÙˆØ§Ø¨Ø¹ Ú©Ù†ØªØ±Ù„ ØªÙ‚ÙˆÛŒÙ…
            window.changeMonth = function(direction) {
                currentMonth += direction;
                if (currentMonth > 12) {
                    currentMonth = 1;
                    currentYear++;
                } else if (currentMonth < 1) {
                    currentMonth = 12;
                    currentYear--;
                }
                renderCalendar();
            };

            window.changeYear = function(year) {
                currentYear = parseInt(year);
                renderCalendar();
            };

            window.toggleYearDropdown = function() {
                const menu = document.getElementById('yearDropdownMenu');
                const isVisible = menu.style.display === 'block';
                menu.style.display = isVisible ? 'none' : 'block';
            };

            window.selectYear = function(year) {
                currentYear = year;
                document.getElementById('yearDropdownMenu').style.display = 'none';
                renderCalendar();
            };

            // Ø¨Ø³ØªÙ† dropdown Ø¨Ø§ Ú©Ù„ÛŒÚ© Ø®Ø§Ø±Ø¬ Ø§Ø² Ø¢Ù†
            document.addEventListener('click', function(event) {
                const dropdown = document.getElementById('yearDropdownMenu');
                const button = document.getElementById('yearDropdownBtn');
                if (dropdown && button && !dropdown.contains(event.target) && !button.contains(event.target)) {
                    dropdown.style.display = 'none';
                }
            });
            
            window.selectDate = function(day) {
                const selectedDate = `${currentYear}/${currentMonth.toString().padStart(2, '0')}/${day.toString().padStart(2, '0')}`;
                const input = document.getElementById(type + 'DateShamsi') || document.getElementById(type + 'Shamsi');
                if (input) {
                    input.value = selectedDate;
                    // ØªØ¨Ø¯ÛŒÙ„ Ø®ÙˆØ¯Ú©Ø§Ø± Ø¨Ù‡ Ù…ÛŒÙ„Ø§Ø¯ÛŒ
                    if (type === 'birth') {
                        convertShamsiToMiladi('birth');
                    } else if (type === 'contractStart') {
                        convertShamsiToMiladi('contractStart');
                    }
                }
                closePersianCalendar();
            };
            
            window.selectToday = function() {
                // Ú¯Ø±ÙØªÙ† ØªØ§Ø±ÛŒØ® Ø§Ù…Ø±ÙˆØ² Ù…ÛŒÙ„Ø§Ø¯ÛŒ
                const todayMiladi = new Date();
                const year = todayMiladi.getFullYear();
                const month = todayMiladi.getMonth() + 1;
                const day = todayMiladi.getDate();
                
                // ØªØ¨Ø¯ÛŒÙ„ Ø¨Ù‡ Ø´Ù…Ø³ÛŒ
                const persianDate = new PersianDate();
                const todayShamsi = persianDate.miladiToShamsi(year, month, day);
                const todayDate = `${todayShamsi.year}/${todayShamsi.month.toString().padStart(2, '0')}/${todayShamsi.day.toString().padStart(2, '0')}`;
                
                const input = document.getElementById(type + 'DateShamsi') || document.getElementById(type + 'Shamsi');
                if (input) {
                    input.value = todayDate;
                    // ØªØ¨Ø¯ÛŒÙ„ Ø®ÙˆØ¯Ú©Ø§Ø± Ø¨Ù‡ Ù…ÛŒÙ„Ø§Ø¯ÛŒ
                    if (type === 'birth') {
                        convertShamsiToMiladi('birth');
                    } else if (type === 'contractStart') {
                        convertShamsiToMiladi('contractStart');
                    }
                }
                closePersianCalendar();
            };
            
            window.closePersianCalendar = function() {
                const calendar = document.getElementById('persianCalendar');
                const backdrop = document.getElementById('calendarBackdrop');
                if (calendar) {
                    calendar.remove();
                }
                if (backdrop) {
                    backdrop.remove();
                }
                // Ø­Ø°Ù ØªÙˆØ§Ø¨Ø¹ global
                delete window.changeMonth;
                delete window.selectDate;
                delete window.selectToday;
                delete window.closePersianCalendar;
            };
            
            renderCalendar();
        }

        // Ù…Ø¯ÛŒØ±ÛŒØª Ø¢Ù¾Ù„ÙˆØ¯ Ø¹Ú©Ø³
        document.getElementById('userPhoto').addEventListener('change', function(e) {
            const file = e.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    const img = document.getElementById('previewImage');
                    const noPhotoText = document.getElementById('noPhotoText');
                    const removeBtn = document.getElementById('removePhotoBtn');
                    
                    img.src = e.target.result;
                    img.style.display = 'block';
                    noPhotoText.style.display = 'none';
                    removeBtn.style.display = 'inline-block';
                };
                reader.readAsDataURL(file);
            }
        });

        function removePhoto() {
            const img = document.getElementById('previewImage');
            const noPhotoText = document.getElementById('noPhotoText');
            const removeBtn = document.getElementById('removePhotoBtn');
            const fileInput = document.getElementById('userPhoto');
            
            img.style.display = 'none';
            noPhotoText.style.display = 'block';
            removeBtn.style.display = 'none';
            fileInput.value = '';
        }

        
        // ØªØ§Ø¨Ø¹ Ø§ØµÙ„Ø§Ø­ Ø´Ø¯Ù‡ Ø¨Ø±Ø§ÛŒ Ù¾Ø± Ú©Ø±Ø¯Ù† Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Ù†Ù…ÙˆÙ†Ù‡
        function fillSampleData() {
            document.getElementById('firstName').value = 'Ø¹Ù„ÛŒ';
            document.getElementById('lastName').value = 'Ø§Ø­Ù…Ø¯ÛŒ';
            document.getElementById('fatherName').value = 'Ù…Ø­Ù…Ø¯';
            document.getElementById('nationalId').value = '1234567890';
            document.getElementById('birthPlace').value = 'ØªÙ‡Ø±Ø§Ù†';
            document.getElementById('birthDateShamsi').value = '1370/05/15';
            convertShamsiToMiladi('birth'); // ØªØ¨Ø¯ÛŒÙ„ ØªØ§Ø±ÛŒØ® ØªÙˆÙ„Ø¯
            
            document.getElementById('mobile').value = '09123456789';
            document.getElementById('phone').value = '02188776655';
            document.getElementById('email').value = 'ali.ahmadi@example.com';
            document.getElementById('address').value = 'ØªÙ‡Ø±Ø§Ù†ØŒ Ø®ÛŒØ§Ø¨Ø§Ù† ÙˆÙ„ÛŒØ¹ØµØ±ØŒ Ù¾Ù„Ø§Ú© Û±Û²Û³';
            
            document.getElementById('employeeId').value = 'PT-1001';
            document.getElementById('jobType').value = 'advanced-b';
            document.getElementById('dailyWorkCount').value = '2500';

            document.getElementById('contractDuration').value = '12';
            document.getElementById('contractStartShamsi').value = '1403/01/01';
            convertShamsiToMiladi('contractStart'); // ØªØ¨Ø¯ÛŒÙ„ ØªØ§Ø±ÛŒØ® Ø´Ø±ÙˆØ¹ Ù‚Ø±Ø§Ø±Ø¯Ø§Ø¯
            
            // ÙØ±Ø§Ø®ÙˆØ§Ù†ÛŒ Ù†Ù‡Ø§ÛŒÛŒ Ø¨Ø±Ø§ÛŒ Ù…Ø­Ø§Ø³Ø¨Ù‡ ØªØ§Ø±ÛŒØ® Ù¾Ø§ÛŒØ§Ù†
            calculateEndDate(); 
        }

        // ØªØ¨Ø¯ÛŒÙ„ Ú©Ø¯ Ù†ÙˆØ¹ Ú©Ø§Ø± Ø¨Ù‡ Ù…ØªÙ† ÙØ§Ø±Ø³ÛŒ
        function getJobTypeText(jobType) {
            const jobTypes = {
                'simple-a': 'Ú©Ø§Ø± Ø³Ø§Ø¯Ù‡ Ù†ÙˆØ¹ A',
                'simple-b': 'Ú©Ø§Ø± Ø³Ø§Ø¯Ù‡ Ù†ÙˆØ¹ B', 
                'simple-c': 'Ú©Ø§Ø± Ø³Ø§Ø¯Ù‡ Ù†ÙˆØ¹ C',
                'advanced-a': 'Ú©Ø§Ø±Ø§Ù„Ú¯ÙˆØ±ÛŒØªÙ… Ù¾ÛŒØ´Ø±ÙØªÙ‡ Ù†ÙˆØ¹ A',
                'advanced-b': 'Ú©Ø§Ø±Ø§Ù„Ú¯ÙˆØ±ÛŒØªÙ… Ù¾ÛŒØ´Ø±ÙØªÙ‡ Ù†ÙˆØ¹ B',
                'advanced-c': 'Ú©Ø§Ø±Ø§Ù„Ú¯ÙˆØ±ÛŒØªÙ… Ù¾ÛŒØ´Ø±ÙØªÙ‡ Ù†ÙˆØ¹ C'
            };
            return jobTypes[jobType] || 'ØªØ¹Ø±ÛŒÙ Ù†Ø´Ø¯Ù‡';
        }

        // Ù…Ø­Ø§Ø³Ø¨Ù‡ ØªØ§Ø±ÛŒØ® Ù¾Ø§ÛŒØ§Ù† Ù‚Ø±Ø§Ø±Ø¯Ø§Ø¯
        // ØªØ§Ø¨Ø¹ Ù‚Ø¨Ù„ÛŒ Ø±Ø§ Ø­Ø°Ù Ú©Ø±Ø¯Ù‡ Ùˆ Ø§ÛŒÙ† Ú©Ø¯ Ø¬Ø¯ÛŒØ¯ Ø±Ø§ Ø¬Ø§ÛŒÚ¯Ø²ÛŒÙ† Ú©Ù†ÛŒØ¯

        // Ú©Ø¯ Ø¬Ø¯ÛŒØ¯ Ùˆ Ø§ØµÙ„Ø§Ø­ Ø´Ø¯Ù‡ Ø¨Ø±Ø§ÛŒ Ù…Ø­Ø§Ø³Ø¨Ù‡ ØªØ§Ø±ÛŒØ® Ù¾Ø§ÛŒØ§Ù†
        function calculateEndDate() {
            const durationInput = document.getElementById('contractDuration');
            const startShamsiInput = document.getElementById('contractStartShamsi');
            const endShamsiInput = document.getElementById('contractEndShamsi');
            const endMiladiInput = document.getElementById('contractEndMiladi');

            const duration = parseInt(durationInput.value);
            const startDateShamsi = startShamsiInput.value;

            if (!duration || !startDateShamsi || !/^\d{4}\/\d{2}\/\d{2}$/.test(startDateShamsi)) {
                endShamsiInput.value = '';
                endMiladiInput.value = '';
                return;
            }

            try {
                const parts = startDateShamsi.split('/');
                let year = parseInt(parts[0]);
                let month = parseInt(parts[1]);
                let day = parseInt(parts[2]);

                month += duration;

                while (month > 12) {
                    month -= 12;
                    year += 1;
                }

                // START: Ø¨Ø®Ø´ Ø§ØµÙ„Ø§Ø­ Ø´Ø¯Ù‡ Ø¨Ø±Ø§ÛŒ Ù…Ø­Ø§Ø³Ø¨Ù‡ Ø±ÙˆØ²Ù‡Ø§ÛŒ Ù…Ø§Ù‡
                let daysInMonth;
                if (month >= 1 && month <= 6) {
                    daysInMonth = 31;
                } else if (month >= 7 && month <= 11) {
                    daysInMonth = 30;
                } else if (month === 12) {
                    // Ø¨Ø±Ø§ÛŒ Ù…Ø§Ù‡ Ø§Ø³ÙÙ†Ø¯ØŒ Ø³Ø§Ù„ Ú©Ø¨ÛŒØ³Ù‡ Ø±Ø§ Ø¨Ø§ ØªØ§Ø¨Ø¹ isLeap Ú†Ú© Ù…ÛŒâ€ŒÚ©Ù†ÛŒÙ…
                    daysInMonth = new PersianDate().isLeap(year) ? 30 : 29;
                } else {
                    daysInMonth = 30; // Fallback
                }

                if (day > daysInMonth) {
                    day = daysInMonth;
                }
                // END: Ù¾Ø§ÛŒØ§Ù† Ø¨Ø®Ø´ Ø§ØµÙ„Ø§Ø­ Ø´Ø¯Ù‡

                const endDateShamsi = `${year}/${String(month).padStart(2, '0')}/${String(day).padStart(2, '0')}`;
                endShamsiInput.value = endDateShamsi;

                const pd = new PersianDate();
                const gregorianEndDate = pd.shamsiToMiladi(year, month, day);
                const endDateMiladi = `${gregorianEndDate.year}-${String(gregorianEndDate.month).padStart(2, '0')}-${String(gregorianEndDate.day).padStart(2, '0')}`;
                endMiladiInput.value = endDateMiladi;

            } catch (error) {
                console.error("Ø®Ø·Ø§ Ø¯Ø± Ù…Ø­Ø§Ø³Ø¨Ù‡ ØªØ§Ø±ÛŒØ® Ù¾Ø§ÛŒØ§Ù†:", error);
                endShamsiInput.value = 'Ø®Ø·Ø§ Ø¯Ø± Ù…Ø­Ø§Ø³Ø¨Ù‡';
                endMiladiInput.value = '';
            }
        }

        // Ø¨Ø§Ø² Ú©Ø±Ø¯Ù† modal Ø§ÙØ²ÙˆØ¯Ù† Ú©Ø§Ø±Ø¨Ø±
        function openAddUserModal() {
            editingUserId = null;
            document.getElementById('modalTitle').textContent = 'Ø§ÙØ²ÙˆØ¯Ù† Ú©Ø§Ø±Ø¨Ø± Ø¬Ø¯ÛŒØ¯';
            document.getElementById('submitBtn').textContent = 'Ø°Ø®ÛŒØ±Ù‡ Ú©Ø§Ø±Ø¨Ø±';
            document.getElementById('userForm').reset();
            const modal = document.getElementById('userModal');
            modal.style.display = 'block';
            // Reset animation for fresh effect each time
            const modalContent = modal.querySelector('.modal-content');
            modalContent.style.animation = 'none';
            modalContent.offsetHeight; // Trigger reflow
            modalContent.style.animation = 'slideUp 0.8s cubic-bezier(0.16, 1, 0.3, 1)';
        }

        // Ø¨Ø§Ø² Ú©Ø±Ø¯Ù† modal ÙˆÛŒØ±Ø§ÛŒØ´ Ú©Ø§Ø±Ø¨Ø±
        function editUser(userId) {
            const user = users.find(u => u.id === userId);
            if (!user) return;
            
            editingUserId = userId;
            document.getElementById('modalTitle').textContent = 'ÙˆÛŒØ±Ø§ÛŒØ´ Ú©Ø§Ø±Ø¨Ø±';
            document.getElementById('submitBtn').textContent = 'Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ú©Ø§Ø±Ø¨Ø±';
            
            // Ù¾Ø± Ú©Ø±Ø¯Ù† ÙØ±Ù… Ø¨Ø§ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Ú©Ø§Ø±Ø¨Ø±
            Object.keys(user).forEach(key => {
                const input = document.getElementById(key);
                if (input) {
                    input.value = user[key];
                }
            });
            
            document.getElementById('userModal').style.display = 'block';
        }

        // Ø¨Ø³ØªÙ† modal
        function closeUserModal() {
            document.getElementById('userModal').style.display = 'none';
            editingUserId = null;
        }

        // Ø±ÛŒØ³Øª Ù¾Ø³ÙˆØ±Ø¯ Ú©Ø§Ø±Ø¨Ø±
        function resetPassword(userId) {
            const user = users.find(u => u.id === userId);
            if (!user) return;
            
            if (confirm(`Ø¢ÛŒØ§ Ù…ÛŒâ€ŒØ®ÙˆØ§Ù‡ÛŒØ¯ Ù¾Ø³ÙˆØ±Ø¯ ${user.firstName} ${user.lastName} Ø±Ø§ Ø±ÛŒØ³Øª Ú©Ù†ÛŒØ¯ØŸ`)) {
                // Ø§Ø±Ø³Ø§Ù„ Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø±ÛŒØ³Øª Ù¾Ø³ÙˆØ±Ø¯ Ø¨Ù‡ Ø³Ø±ÙˆØ±
                const newPassword = generateRandomPassword();
                alert(`Ù¾Ø³ÙˆØ±Ø¯ Ø¬Ø¯ÛŒØ¯: ${newPassword}\nÙ„Ø·ÙØ§Ù‹ Ø§ÛŒÙ† Ù¾Ø³ÙˆØ±Ø¯ Ø±Ø§ Ø¨Ù‡ Ú©Ø§Ø±Ø¨Ø± Ø§Ø·Ù„Ø§Ø¹ Ø¯Ù‡ÛŒØ¯.`);
            }
        }

        // Ø­Ø°Ù Ú©Ø§Ø±Ø¨Ø±
        function deleteUser(userId) {
            const user = users.find(u => u.id === userId);
            if (!user) return;
            
            if (confirm(`Ø¢ÛŒØ§ Ù…ÛŒâ€ŒØ®ÙˆØ§Ù‡ÛŒØ¯ ${user.firstName} ${user.lastName} Ø±Ø§ Ø­Ø°Ù Ú©Ù†ÛŒØ¯ØŸ`)) {
                users = users.filter(u => u.id !== userId);
                renderUsers();
            }
        }

        // ØªÙˆÙ„ÛŒØ¯ Ù¾Ø³ÙˆØ±Ø¯ ØªØµØ§Ø¯ÙÛŒ
        function generateRandomPassword() {
            const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';
            let password = '';
            for (let i = 0; i < 8; i++) {
                password += chars.charAt(Math.floor(Math.random() * chars.length));
            }
            return password;
        }

        // Ø¬Ø³ØªØ¬Ùˆ Ø¯Ø± Ú©Ø§Ø±Ø¨Ø±Ø§Ù†
        function searchUsers() {
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();
            const filteredUsers = users.filter(user => {
                return user.firstName.toLowerCase().includes(searchTerm) ||
                       user.lastName.toLowerCase().includes(searchTerm) ||
                       user.nationalId.includes(searchTerm) ||
                       user.email.toLowerCase().includes(searchTerm) ||
                       user.employeeId.toLowerCase().includes(searchTerm);
            });
            renderUsers(filteredUsers);
        }

        // Ù†Ù…Ø§ÛŒØ´ Ú©Ø§Ø±Ø¨Ø±Ø§Ù† Ø¯Ø± Ø¬Ø¯ÙˆÙ„
        function renderUsers(usersToShow = users) {
            const tbody = document.getElementById('usersTableBody');
            const emptyState = document.getElementById('emptyState');
            
            if (usersToShow.length === 0) {
                tbody.innerHTML = '';
                emptyState.style.display = 'block';
                return;
            }
            
            emptyState.style.display = 'none';
            tbody.innerHTML = usersToShow.map(user => `
                <tr>
                    <td>${user.firstName} ${user.lastName}</td>
                    <td>${user.nationalId}</td>
                    <td>${user.email}</td>
                    <td>${user.employeeId}</td>
                    <td>${getJobTypeText(user.jobType)}</td>
                    <td><span class="status-badge status-active">ÙØ¹Ø§Ù„</span></td>
                    <td>
                        <button class="action-btn edit-btn" onclick="editUser('${user.id}')">ÙˆÛŒØ±Ø§ÛŒØ´</button>
                        <button class="action-btn reset-btn" onclick="resetPassword('${user.id}')">Ø±ÛŒØ³Øª Ù¾Ø³ÙˆØ±Ø¯</button>
                        <button class="action-btn delete-btn" onclick="deleteUser('${user.id}')">Ø­Ø°Ù</button>
                    </td>
                </tr>
            `).join('');
        }

        
        // Ú©Ø¯ Ø¬Ø¯ÛŒØ¯ Ø¨Ø±Ø§ÛŒ Ú©Ù†ØªØ±Ù„ Ù…Ù†ÙˆÛŒ Ú©Ø´ÙˆÛŒÛŒ
        const dailyWorkCountSelect = document.getElementById('dailyWorkCount');

        // Ø¨Ø§Ø²/Ø¨Ø³ØªÙ† Ù†Ø±Ù… Ø¨Ø¯ÙˆÙ† Ù¾Ø±Ø´ Ø±ÙˆÛŒ Ø¯Ø³Ú©ØªØ§Ù¾ (mousedown) Ùˆ Ù…ÙˆØ¨Ø§ÛŒÙ„ (touchstart)
        dailyWorkCountSelect.addEventListener('mousedown', function(e) {
            if (e.target !== this) return; // Ù†Ø°Ø§Ø± Ú©Ù„ÛŒÚ© Ø±ÙˆÛŒ option Ø§ÛŒÙ† Ù‡Ù†Ø¯Ù„Ø± Ø±Ø§ Ø§Ø¬Ø±Ø§ Ú©Ù†Ø¯
            e.preventDefault(); // Ø¬Ù„ÙˆÚ¯ÛŒØ±ÛŒ Ø§Ø² Ø¨Ø§Ø² Ø´Ø¯Ù† Ø¨ÙˆÙ…ÛŒ Ù…Ø±ÙˆØ±Ú¯Ø± (Ú†Ø´Ù…Ú©)
            if (this.size > 0) {
                this.size = 0;
                this.blur();
            } else {
                this.focus();
                this.size = Math.min(10, this.options.length);
            }
        });

        dailyWorkCountSelect.addEventListener('touchstart', function(e) {
            if (e.target !== this) return;
            e.preventDefault();
            if (this.size > 0) {
                this.size = 0;
                this.blur();
            } else {
                this.focus();
                this.size = Math.min(10, this.options.length);
            }
        }, { passive: false });

        // Ø±ÙˆÛŒØ¯Ø§Ø¯ Ø¨Ø±Ø§ÛŒ Ø¨Ø³ØªÙ† Ù„ÛŒØ³Øª Ù¾Ø³ Ø§Ø² Ø§Ù†ØªØ®Ø§Ø¨ ÛŒÚ© Ú¯Ø²ÛŒÙ†Ù‡
        dailyWorkCountSelect.addEventListener('change', function() {
            this.size = 0;
        });

        // Ø±ÙˆÛŒØ¯Ø§Ø¯ Ø¨Ø±Ø§ÛŒ Ø¨Ø³ØªÙ† Ù„ÛŒØ³Øª Ø§Ú¯Ø± Ú©Ø§Ø±Ø¨Ø± Ø¨Ù‡ Ø¨ÛŒØ±ÙˆÙ† Ú©Ù„ÛŒÚ© Ú©Ø±Ø¯
        dailyWorkCountSelect.addEventListener('blur', function() {
            this.size = 0;
        });

        // Ø§Ø¹Ù…Ø§Ù„ Ù‡Ù…Ø§Ù† Ø±ÙØªØ§Ø± Ø¨Ø±Ø§ÛŒ Ù…Ù†ÙˆÛŒ Â«Ù†ÙˆØ¹ Ú©Ø§Ø±Â» ØªØ§ Ø¸Ø§Ù‡Ø± Ù…Ù†ÙˆÛŒ Ø¨Ø§Ø² ÛŒÚ©ÛŒ Ø´ÙˆØ¯
        const jobTypeSelect = document.getElementById('jobType');
        jobTypeSelect.addEventListener('mousedown', function(e) {
            if (e.target !== this) return;
            e.preventDefault();
            if (this.size > 0) {
                this.size = 0;
                this.blur();
            } else {
                this.focus();
                this.size = Math.min(10, this.options.length);
            }
        });

        jobTypeSelect.addEventListener('touchstart', function(e) {
            if (e.target !== this) return;
            e.preventDefault();
            if (this.size > 0) {
                this.size = 0;
                this.blur();
            } else {
                this.focus();
                this.size = Math.min(10, this.options.length);
            }
        }, { passive: false });

        // Ø¨Ø³ØªÙ† Ø¨Ø§ change/blur Ù…Ø§Ù†Ù†Ø¯ dailyWorkCount
        jobTypeSelect.addEventListener('change', function() {
            this.size = 0;
        });
        jobTypeSelect.addEventListener('blur', function() {
            this.size = 0;
        });

        // Ø¨Ø³ØªÙ† ÙÙˆØ±ÛŒ Ú©Ø§Ø¯Ø± Ù¾Ø³ Ø§Ø² Ú©Ù„ÛŒÚ© Ø±ÙˆÛŒ Ù‡Ø± Ú¯Ø²ÛŒÙ†Ù‡ (Ùˆ Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ø§Ø² Enter/Escape)
        function wireInstantClose(selectEl) {
            // Ù‡Ù†Ú¯Ø§Ù… Ú©Ù„ÛŒÚ© Ø±ÙˆÛŒ Ú¯Ø²ÛŒÙ†Ù‡ØŒ Ù‡Ù…Ø§Ù† Ù„Ø­Ø¸Ù‡ Ø¨Ø¨Ù†Ø¯ (Ø­ØªÛŒ Ø§Ú¯Ø± Ú¯Ø²ÛŒÙ†Ù‡ Ù‚Ø¨Ù„Ø§Ù‹ Ø§Ù†ØªØ®Ø§Ø¨ Ø´Ø¯Ù‡ Ø¨ÙˆØ¯)
            selectEl.addEventListener('mousedown', function(e) {
                const opt = e.target;
                if (opt && opt.tagName === 'OPTION') {
                    const options = Array.from(this.options);
                    const idx = options.indexOf(opt);
                    if (idx > -1) this.selectedIndex = idx;
                    this.dispatchEvent(new Event('change', { bubbles: true }));
                    this.size = 0;
                    this.blur();
                    e.preventDefault();
                }
            });

            // Ú©Ù„ÛŒØ¯Ù‡Ø§ÛŒ Enter Ùˆ Escape Ù†ÛŒØ² Ù…Ù†Ùˆ Ø±Ø§ Ù…ÛŒâ€ŒØ¨Ù†Ø¯Ù†Ø¯
            selectEl.addEventListener('keydown', function(e) {
                if (e.key === 'Enter' || e.key === 'Escape') {
                    this.size = 0;
                    this.blur();
                    e.preventDefault();
                }
            });
        }

        // Ø§Ø¹Ù…Ø§Ù„ Ø±ÙØªØ§Ø± Ø¨Ø³ØªÙ† ÙÙˆØ±ÛŒ Ø¨Ø±Ø§ÛŒ Ù‡Ø± Ø¯Ùˆ Ù…Ù†Ùˆ
        wireInstantClose(dailyWorkCountSelect);
        wireInstantClose(jobTypeSelect);

        // Ø¨Ø³ØªÙ† Ù…Ù†ÙˆÙ‡Ø§ Ø¨Ø§ Ú©Ù„ÛŒÚ© Ø®Ø§Ø±Ø¬ Ø§Ø² Ú©Ø§Ø¯Ø± (Ø¨Ø±Ø§ÛŒ Ù‡Ø± Ø¯Ùˆ select)
        function closeDropdownsOnOutsideClick(e) {
            const selects = [dailyWorkCountSelect, jobTypeSelect];
            const clickedInside = selects.some(sel => sel && sel.contains(e.target));
            if (!clickedInside) {
                selects.forEach(sel => {
                    if (sel && sel.size > 0) {
                        sel.size = 0;
                        sel.blur();
                    }
                });
            }
        }

        document.addEventListener('mousedown', closeDropdownsOnOutsideClick, true);
        document.addEventListener('touchstart', closeDropdownsOnOutsideClick, { passive: true, capture: true });

        // Ø°Ø®ÛŒØ±Ù‡ Ú©Ø§Ø±Ø¨Ø±

        document.getElementById('userForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const formData = new FormData(this);
            const userData = {};
            formData.forEach((value, key) => {
                userData[key] = value;
            });
            
            if (editingUserId) {
                // Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ú©Ø§Ø±Ø¨Ø±
                const userIndex = users.findIndex(u => u.id === editingUserId);
                if (userIndex !== -1) {
                    users[userIndex] = { id: editingUserId, ...userData };
                }
            } else {
                // Ø§ÙØ²ÙˆØ¯Ù† Ú©Ø§Ø±Ø¨Ø± Ø¬Ø¯ÛŒØ¯
                const newUser = { id: 'user-' + Date.now(), ...userData };
                users.push(newUser);
            }
            
            renderUsers();
            closeUserModal();
        });


        // Ø®Ø±ÙˆØ¬ Ø§Ø² Ø³ÛŒØ³ØªÙ…
        function logout() {
            if (confirm('Ø¢ÛŒØ§ Ù…ÛŒâ€ŒØ®ÙˆØ§Ù‡ÛŒØ¯ Ø§Ø² Ø³ÛŒØ³ØªÙ… Ø®Ø§Ø±Ø¬ Ø´ÙˆÛŒØ¯ØŸ')) {
                window.location.href = 'demo.html';
            }
        }

        // Ø¨Ø³ØªÙ† modal Ø¨Ø§ Ú©Ù„ÛŒÚ© Ø±ÙˆÛŒ background
        document.getElementById('userModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeUserModal();
            }
        });


        // Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø§ÙˆÙ„ÛŒÙ‡
        document.addEventListener('DOMContentLoaded', function() {
            renderUsers();
        });
    </script>
</body>
</html>